<!DOCTYPE html>
<html data-ng-app="app">
<head lang="en">
    <meta charset="UTF-8">
    <title>Front-end Guide {{ pkg.name }}</title>
    <!--[if lt IE 9]>
    <script>
        (function (d, a) { var l = a.length; while(l--){ d.createElement(a[l]); } }(document,
        ['HEADER', 'NAV', 'SECTION', 'FOOTER', 'ARTICLE', 'MAIN', 'FIGCAPTION', 'FIGURE', 'ASIDE']));
    </script>
    <![endif]-->
    <link rel="stylesheet" href="{{ paths.root }}views/_app-viewer/app-viewer.css">
</head>
<body class="viewer" data-ng-controller="ViewerController as viewer">

{% raw %}
<header class="viewer-header" data-viewer-header data-ng-class="{ 'is-small': viewer.isSmall }">
    <!--<h1 class="viewer-title">Front-end Guide</h1>-->
	<img class="site-logo" src="{{ viewer.rootPath }}assets/components/app-logo/logo.svg" alt="[Logo]"
		data-ng-class="{ 'is-clickable' : viewer.isSmall }"
		data-ng-click="viewer.isSmall = false">

	<nav class="viewer-module-selector" data-ng-class="{'is-hidden': viewer.isSmall}">
		<div class="viewer-header-select-wrapper">
			<select id="viewer-module" class="viewer-header-select" data-ng-model="viewer.module"
					data-ng-options="module.name group by module.type for (id, module) in viewer.modules"></select>

		</div>
        <button class="viewer-button viewer-icon-label" data-ng-class="{ 'is-active': viewer.showAnnotations }"
                data-ng-click="viewer.toggleAnnotations()"></button>
        <button class="viewer-button viewer-icon-info-outline" data-ng-class="{ 'is-active': viewer.showInfo }"
                data-ng-click="viewer.showInfo = !viewer.showInfo "></button>
        <a data-ng-href="{{ viewer.getModulePath() }}" target="_blank" title="open module in new window"
           class="viewer-link viewer-icon-launch"></a>
    </nav>
    <div class="viewer-size-controls" data-ng-class="{'is-hidden': viewer.isSmall}">
        <button class="viewer-button"
                data-ng-repeat="breakpoint in ::viewer.breakpoints"
                data-ng-class="{ 'is-active': (viewer.width == breakpoint.width) }"
                data-ng-click="viewer.setWidth(breakpoint.width)"
                >{{ ::breakpoint.name }}</button>
        <button class="viewer-button"
                data-ng-class="{ 'is-active': viewer.autoWidth }"
                data-ng-click="viewer.toggleAutoWidth()">FULL</button>
		<div class="viewer-width-input-wrapper">
			<input	id="viewer-width" class="viewer-width-input" type="number" min="240" step="10" required="true"
					  data-ng-model="viewer.width"
					  data-ng-readonly="viewer.autoWidth">
		</div>
		<button class="viewer-button viewer-button-collapse-menu viewer-icon-chevron-left"
				data-ng-click="viewer.isSmall = !viewer.isSmall"></button>
    </div>

</header>
{% endraw %}

{% raw %}
<main class="viewer-content">
    <section class="viewer-info"
             data-ng-show="viewer.showInfo"
             data-ng-style="{ 'height': viewer.height+'px' }">
        <h2>{{ viewer.module.name }} {{ viewer.module.type }}</h2>
        <p>@todo: add README as html.</p>
        <p>@todo: add code fragments with syntax highlighting and line numbers.</p>
        <div data-ng-bind-html="viewer.module.readme"></div>
        <button class="viewer-button viewer-info-close" data-ng-click="viewer.showInfo = false">x</button>
    </section>
    <iframe class="viewer-frame"
            data-viewer-frame
            data-ng-src="{{ viewer.getModulePath() }}"
            data-ng-attr-width="{{ viewer.width }}"
            data-ng-attr-height="{{ viewer.height }}"
            ></iframe>
</main>
{% endraw %}

<script src="https://code.angularjs.org/1.3.0-rc.5/angular.min.js"></script>
<script src="https://code.angularjs.org/1.3.0-rc.5/angular-sanitize.min.js"></script>
<script>
    angular.module('config',[])
        .constant('ROOT_PATH', '{{ paths.root }}')
        .constant('MODULES', [
            {# create list of modules based on module index #}
            {% for item in moduleIndex.components | match('^[a-z]', 'name') %}
                {{ item | prettyJson }},
            {% endfor %}
            {% for item in moduleIndex.views | match('^[a-z]', 'name') %}
                {{ item | prettyJson }},
            {% endfor %}
            {
                id: 'app/index',
                name: 'index',
                path: 'views/_app-guide/app-guide.html',
                type: 'app'
            },
            {
                id: 'app/style-guide',
                name: 'style-guide',
                path: 'views/_style-guide/style-guide.html',
                type: 'app'
            }
        ]);
</script>
<script>{% include "views/_app-viewer/app-viewer.js" %}</script>
</body>
</html>